let chalk,pluralize,stripAnsi,dedent,link;_ab9‍.x([["default",()=>fatalError]]);_ab9‍.w("chalk",[["default",["chalk"],function(v){chalk=v}]]);_ab9‍.w("pluralize",[["default",["pluralize"],function(v){pluralize=v}]]);_ab9‍.w("strip-ansi",[["default",["stripAnsi"],function(v){stripAnsi=v}]]);_ab9‍.w("ts-dedent",[["default",["dedent"],function(v){dedent=v}]]);_ab9‍.w("../../components/link",[["default",["link"],function(v){link=v}]]);






const buildFields = ({ id, number, webUrl }) => ({ id, number, webUrl });

               function fatalError(
  { sessionId, git = {}, pkg, flags, exitCode, storybook, build, isolatorUrl, cachedUrl },
  error,
  timestamp = new Date().toISOString()
) {
  const errors = [].concat(error);
  const email = link(pkg.bugs.email);
  const website = link(pkg.docs);
  const debugInfo = {
    timestamp,
    sessionId,
    gitVersion: git.version,
    nodePlatform: process.platform,
    nodeVersion: process.versions.node,
    packageName: pkg.name,
    packageVersion: pkg.version,
    ...(storybook ? { storybook } : {}),
    flags,
    exitCode,
    errorType: errors.map(err => err.name).join('\n'),
    errorMessage: stripAnsi(errors.map(err => err.message).join('\n')),
    ...(isolatorUrl ? { isolatorUrl } : {}),
    ...(cachedUrl ? { cachedUrl } : {}),
    ...(build && { build: buildFields(build) }),
  };
  const stacktraces = errors.map(err => err.stack).filter(Boolean);
  const viewStacktraces = stacktraces.length
    ? chalk`\n{dim → View the full ${pluralize('stacktrace', stacktraces.length)} below}`
    : '';

  return dedent(chalk`
    ${errors.map(err => err.message).join('\n')}${viewStacktraces}

    If you need help, please chat with us at ${website} for the fastest response.
    You can also email the team at ${email} if chat is not an option.

    Please provide us with the following info:
    {bold ${JSON.stringify(debugInfo, null, 2)}}
    ${stacktraces.length ? chalk`\n{dim ${stacktraces.join('\n\n')}}` : ''}
  `);
}
